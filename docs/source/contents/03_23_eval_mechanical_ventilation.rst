.. include:: definition.txt

.. raw:: latex

    \clearpage

========================================================================================================================
機械換気
========================================================================================================================

------------------------------------------------------------------------------------------------------------------------
1 はじめに
------------------------------------------------------------------------------------------------------------------------

本節では、機械換気の指定の仕方について定義する。

機械換気の仕様は、換気経路 :math:`vr` ごとにリストで、json 形式で入力する。

.. code-block::

    {
        "mechanical_ventilations": [
            {
                "id": 0,
                "root_type": "type3",
                "volume": 30.0,
                "root": [0, 1, 2]
            },
            {
                ...
            }, ...
        ]
    }

換気経路 :math:`vr` のIDを :math:`ID_{vr}` とする。

換気経路 :math:`vr` の換気経路のタイプを :math:`T_{vr}` とする。

ここで換気経路のタイプとは、「type1」「type2」「type3」及び「natural_loop」の何れかの値とする。

「type1」「type2」「type3」はそれぞれ第一種換気・第二種換気・第三種換気を表し、外気を起点とし最終的に外気に抜けていく換気経路を表している。

「natural_loop」は、室A→室B→室C→室A というように外気を経由しない閉じたループを表す。

換気経路 :math:`vr` の換気量を :math:`V_{vr}` とする。

換気経路 :math:`vr` が経由する室の |k| 番目の室のIDを :math:`ID_{rm,vr,k}` とする。


本節で示す計算の結果、次の値が得られる。

    1. 室 |i| の機械換気量（全般換気量）, :math:`V_{vent,mec,general,i}`, |m3| / s
    2. 室 |i*| から室 |i| への室間の空気移動量（流出換気量を含む）, :math:`V_{vent,int,i,i}`, |m3| / s

------------------------------------------------------------------------------------------------------------------------
2 機械換気量（全般換気量）
------------------------------------------------------------------------------------------------------------------------

室 |i| の機械換気量（全般換気量） :math:`V_{vent,mec,general,i}` は次式により表される。

.. math::
    :nowrap:

    \begin{align*}
        V_{vent,mec,general,i} = \sum_{vr=0}{ \frac{ V_{vr} \mid _{ (T_{vr} = \text{type1, type2 or type3}) and (ID_{rm,vr,k} \mid_{k=0} = i)} }{3600} }
        \tag{1}
    \end{align*}

:math:`V_{vent,mec,general,i}` : 室 |i| の機械換気量（全般換気量）, |m3| / s

:math:`V_{vr}` : 換気経路 :math:`vr` の換気量, |m3| / h

:math:`T_{vr}` : 換気経路 :math:`vr` の換気経路のタイプ

:math:`ID_{rm,vr,k}` : 換気経路 :math:`vr` が経由する室の |k| 番目の室のID

------------------------------------------------------------------------------------------------------------------------
3 室間の空気移動量（流出換気量を含む）
------------------------------------------------------------------------------------------------------------------------

室 |i*| から室 |i| への室間の空気移動量（流出換気量を含む） :math:`V_{vent,int,i,i*}` は、
換気経路 :math:`vr` ごとに、換気経路の種類ごとに次のように加算・減算する。

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3.1 換気経路 :math:`vr` が「type1」「type2」「type2」の場合
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

:math:`k=0` のとき

特に加算・減算しない

:math:`k \ne 0` のとき

行 :math:`ID_{rm,vr,k}` 列 :math:`ID_{rm,vr,k-1}` に次の値を加算する。

.. math::
    :nowrap:

    \begin{align*}
        \frac{V_{vr}}{3600}
    \end{align*}

行 :math:`ID_{rm,vr,k}` 列 :math:`ID_{rm,vr,k}` に次の値を減算する。

.. math::
    :nowrap:

    \begin{align*}
        \frac{V_{vr}}{3600}
    \end{align*}

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3.1 換気経路 :math:`vr` が「natural_loop」の場合
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

:math:`k=0` のとき

行 :math:`ID_{rm,vr,k}` 列 :math:`ID_{rm,vr,N_{vr}-1}` に次の値を加算する。
ここで、:math:`N_{vr}`とは換気経路 :math:`vr` の経由する室の数である。つまり、:math:`ID_{rm,vr,N_{vr}-1}` は、最後尾の室のIDである。

.. math::
    :nowrap:

    \begin{align*}
        \frac{V_{vr}}{3600}
    \end{align*}

行 :math:`ID_{rm,vr,k}` 列 :math:`ID_{rm,vr,k}` に次の値を減算する。

.. math::
    :nowrap:

    \begin{align*}
        \frac{V_{vr}}{3600}
    \end{align*}

:math:`k \ne 0` のとき

行 :math:`ID_{rm,vr,k}` 列 :math:`ID_{rm,vr,k-1}` に次の値を加算する。

.. math::
    :nowrap:

    \begin{align*}
        \frac{V_{vr}}{3600}
    \end{align*}

行 :math:`ID_{rm,vr,k}` 列 :math:`ID_{rm,vr,k}` に次の値を減算する。

.. math::
    :nowrap:

    \begin{align*}
        \frac{V_{vr}}{3600}
    \end{align*}
